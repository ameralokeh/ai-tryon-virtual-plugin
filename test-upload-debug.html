<!DOCTYPE html>
<html>
<head>
    <title>Upload Debug Test</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>Upload Debug Test</h2>
    
    <div id="upload-area" style="border: 2px dashed #ccc; padding: 40px; text-align: center; cursor: pointer;">
        <div>Click to upload or drag & drop</div>
        <input type="file" id="customer-image-input" accept="image/*" style="display: none;">
    </div>
    
    <div id="debug-output" style="margin-top: 20px; padding: 20px; background: #f5f5f5; font-family: monospace;"></div>

    <script>
    $(document).ready(function() {
        console.log('Debug script loaded');
        
        // Test if jQuery is working
        $('#debug-output').append('<div>✅ jQuery loaded successfully</div>');
        
        // Test if elements exist
        if ($('#upload-area').length) {
            $('#debug-output').append('<div>✅ Upload area found</div>');
        } else {
            $('#debug-output').append('<div>❌ Upload area NOT found</div>');
        }
        
        if ($('#customer-image-input').length) {
            $('#debug-output').append('<div>✅ File input found</div>');
        } else {
            $('#debug-output').append('<div>❌ File input NOT found</div>');
        }
        
        // Test click handler
        $('#upload-area').on('click', function() {
            console.log('Upload area clicked');
            $('#debug-output').append('<div>✅ Upload area click detected</div>');
            $('#customer-image-input').click();
        });
        
        // Test file selection
        $('#customer-image-input').on('change', function(e) {
            console.log('File input changed', e.target.files);
            const file = e.target.files[0];
            if (file) {
                $('#debug-output').append('<div>✅ File selected: ' + file.name + ' (' + file.size + ' bytes)</div>');
                
                // Test file reading
                const reader = new FileReader();
                reader.onload = function(e) {
                    $('#debug-output').append('<div>✅ File read successfully</div>');
                    $('#upload-area').html('<img src="' + e.target.result + '" style="max-width: 200px; max-height: 200px;">');
                };
                reader.onerror = function() {
                    $('#debug-output').append('<div>❌ File read failed</div>');
                };
                reader.readAsDataURL(file);
            } else {
                $('#debug-output').append('<div>❌ No file selected</div>');
            }
        });
        
        // Test drag and drop
        const uploadArea = $('#upload-area')[0];
        
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('Drag event:', eventName);
                $('#debug-output').append('<div>✅ Drag event: ' + eventName + '</div>');
            }, false);
        });
        
        uploadArea.addEventListener('drop', function(e) {
            const files = e.dataTransfer.files;
            console.log('Files dropped:', files);
            $('#debug-output').append('<div>✅ Files dropped: ' + files.length + '</div>');
            
            if (files.length > 0) {
                const file = files[0];
                $('#debug-output').append('<div>✅ Dropped file: ' + file.name + ' (' + file.size + ' bytes)</div>');
                
                // Trigger the file input change event
                const fileInput = $('#customer-image-input')[0];
                fileInput.files = files;
                $(fileInput).trigger('change');
            }
        }, false);
    });
    </script>
</body>
</html>
</text>